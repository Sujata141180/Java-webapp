# Use the latest 2.1 version of CircleCI pipeline process engine. See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1
# Use a package of configuration called an orb.
orbs:
  # Declare a dependency on the welcome-orb
  welcome: circleci/welcome-orb@0.4.1
  maven: circleci/maven@0.0.12
# Orchestrate or schedule a set of jobs
jobs:
  test2:
    working_directory: ~/test
    environment:
      NODE_ENV: "circle"
    docker:
      - image: circleci/node:10.16.3-stretch
    steps:
      - checkout
      - run:
          command: ls -ltrh
      - run:
          command: dir 
  test3:
    working_directory: ~/test
    environment:
      NODE_ENV: "circle"
    docker:
      - image: circleci/node:10.16.3-stretch
    steps:
      - checkout
      - run:
          command: |
            cd src/main/webapp/ 
            ls
  test4:
    working_directory: ~/test
    environment:
      NODE_ENV: "circle"
    docker:
      - image: circleci/node:10.16.3-stretch
    steps:
      - checkout
      - run:
          command: |
            cd src/main/webapp/ 
            ls
            echo "Hello from test4"
            echo "I am in new line"
  build:
    docker:
      - image: circleci/openjdk:8-jdk
    environment:
      # Customize the JVM maximum heap limit
      MAVEN_OPTS: -Xmx3200m
    steps:
      - checkout
      - run: mvn integration-test    
      - run: mvn package
  
        
workflows:
  # Name the workflow "welcome"
  maven_test:
    jobs:
      - build
          
  #welcome:
    # Run the welcome/run job in its own container
    #jobs:
     # - welcome/run
     # - test1:
      #    type: approval
      #- test2:
       #   requires: 
        #    - test1
     # - test3:
    #      requires:
   #         - test2
  #    - test4